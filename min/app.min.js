jQuery(function(e){"use strict";var t,a,n,r;return null==localStorage.options&&(n={theme:localStorage.wikiTheme.split("/")[5]||"custom",url:localStorage.wikiURL||"http://en.wikipedia.org/"},localStorage.options=JSON.stringify(n)),n=JSON.parse(localStorage.options),e("link").attr("href","bootswatch/"+n.theme+"/bootstrap.min.css"),a=function(){var a;return a=location.hash.substring(7,location.hash.length),""!==a?(e("#search").val(decodeURIComponent(a)),t(a,!0)):void 0},r=function(e,t){return jQuery.getJSON(n.url+"w/api.php?callback=?",{format:"json",action:"opensearch",search:e,suggest:!0,limit:100},function(e){return t(e[1])})},t=function(t,a){var r;return e("base").attr("href",""+n.url+"wiki/"+t),e("#content").fadeOut().empty(),e("#loading").fadeIn(),e("body").addClass("loading"),a||(location.hash="/wiki/"+t),r={action:"mobileview",format:"json",page:t,sections:"all"},e.getJSON(n.url+"w/api.php?callback=?",r,function(a){var n,r;return a.error?e("#content").html('<div class="alert alert-danger">'+a.error.info+"</div>"):(r=a.mobileview.normalizedtitle||t.replace(/_/g," "),e("#search").val(r),n="",n+='<h1 class="page-header">'+r+"</h1>\n",a=a.mobileview.sections,e.each(a,function(e,t){return e*=1,1===t.toclevel?(1!==e&&(n+="</details>"),n+='<details id=" '+t.line+' " class="panel panel-default">            				<summary class="panel-heading"><span class="panel-title">'+t.line+'</span></summary>          				<div class="panel-body">          					'+t.text.replace('class="','class="hide ')+"          				</div>"):n+=t.text+"\n"}),n+="</details>",e("#content").html(n),e("#content img").lazyload({effect:"fadeIn"})),e("table, table *").removeAttr("style"),e("#loading").fadeOut(),e("#content").fadeIn(),e("body").removeClass("loading"),e.fn.details.support?void 0:e("details").details()})},a(),e("#back").click(function(){return history.back(),a(),!1}),e("#forward").click(function(){return history.forward(),a(),!1}),e("#newTab").click(function(t){return window.open(n.url+"wiki/"+e("#search").val(),"_newtab"),t.preventDefault()}),e("#search").keypress(function(){return e("#search").typeahead({source:r,items:10})}),e("#content").on("click","a[href^='/wiki/'], a[href^='"+n.url+"wiki/'], a[href^='"+n.url.replace("https:","http:")+"wiki/']",function(a){var n,r;return n=this.href.split("/"),r=decodeURIComponent(n[n.length-1]),""===r&&(r=decodeURIComponent(n[n.length-2])),e("#search").val(r),t(r),a.preventDefault()}),e("#content").on("click","a:not(a[href^='/wiki/'], a[href^='"+n.url+"wiki/'], a[href^='"+n.url.replace("https:","http:")+"wiki/'], a[href='options.html'])",function(e){return window.open(this.href,"_newtab"),e.preventDefault()}),e("a[href='options.html']").click(function(){return e("base").attr("href","")}),e("#search-form").submit(function(a){return t(e("#search").val()),a.preventDefault()})});
