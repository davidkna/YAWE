machine:
  node:
    version: 6.3.1

dependencies:
  override:
    - npm install --global gulp-cli
    - npm prune
    - npm update
    - npm install

test:
  override:
    - gulp lint
    - |
      gulp release:chrome
      cd dist
      zip -r $CIRCLE_ARTIFACTS/chrome.zip *
    - |
      gulp scss_web js:app_web
      cd dist
      zip -r $CIRCLE_ARTIFACTS/web.zip *
    - |
      gulp scss_opera js
      cd dist
      zip -r $CIRCLE_ARTIFACTS/opera.zip *
    - |
      gulp scss_firefox
      cd dist
      zip -r $CIRCLE_ARTIFACTS/firefox.xpi *
